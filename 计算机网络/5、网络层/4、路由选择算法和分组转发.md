### 4.1 基本概念
1. 分组转发：互联网中主机、路由器转发ip分组的过程
	1. 默认路由（网关）：第一跳路由、主机所在局域网与互联网连接的网关
2. 分组转发分类：
	1. 直接转发：源主机与目的主机在同一个网络、或者目的路由想目的主机转发
	2. 间接转发：源主机与目的主机不在同一个网络
### 4.2 路由算法
1. 静态路由：每一个目的地址的路径都固定存储在路由表中，唯一确定从源主机到目的主机的路径
	1. ![[Pasted image 20240629164247.png]]
2. 动态路由：
3. 标准路由选择算法
	1. ![[Pasted image 20240629164442.png]]
4. 子路由算法
	1. ![[Pasted image 20240629164713.png]]
		1. 路由表中没有明确指出该网络下一跳的信息就选默认路由
		2. 如果有就选下一跳
5. __IP路由汇聚__
	1. 作用：减少路由表项数
	2. 基于CIDR
	3. 路由表项由 __网络前缀__ 和 __下一跳__ 组成
	4. __最长网络前缀匹配：路由选择最长网络前缀的路由__
	5. ![[Pasted image 20240629165710.png]]
	6. ![[Pasted image 20240629165534.png]]
		1. 共同网络前缀
		2. 相同输出端口
6. 自治系统：大学，公司
	1. 域内路由选择：自治系统内部的路由选择
	2. 域间路由选择：不同自治系统之间的路由选择
	3. 内部网关协议（IGP）：RIP和OSPF协议
	4. 外部网关协议（EGP）：BGP协议
7. RIP协议
	1. ![[Pasted image 20240629195126.png]]
	2. 向 __相邻路由器__ 周期性告知
	3. 设置 __周期更新定时器__ ，每隔30s在相邻路由之间交换一次信息
	4. 路径长度相同，先入为主
	5. 每个路由表项设有超时定时器，在路由表被修改时开始计时，若180s后没有收到刷新信息，表示该路径已经出现故障，将该记录设置位无效（不删除该项路由记录）
	6.  __RIP是基于路劲向量路由选择算法__
8. 最短路径优先协议OSPF
	1. 使用链路状态
	2. 路由器周期性发送链路状态信息，AS内所有路由器都能形成链路状态数据库（需要图中的所有信息）
	3. 在链路状态发生改变时，采用洪泛法向 __所有路由__ 发送该消息
	4. 按照最短路径原则。Dijkstra算法
		1. ![[Pasted image 20240629201046.png]]
9. 外部网关协议：BGP
	1. 采用路径向量路由协议
	2. 在链路状态改变时用洪泛法向所有路由发送消息
	3. 每一个AS至少有一个路由作为该AS的”BGP“发言人